#!/usr/bin/env ruby

require "tidy_file_organizer"

def usage
  puts "Usage: tidy-file-organizer [setup|run] [target_directory] [options]"
  puts "\nOptions:"
  puts "  --force    Dry-runを無効にして実際にファイルを移動します"
  exit 1
end

command = ARGV[0]
target_dir = ARGV[1] || "."

usage unless ["setup", "run"].include?(command)

organizer = TidyFileOrganizer::Organizer.new(target_dir)

case command
when "setup"
  organizer.setup
when "run"
  dry_run = !ARGV.include?("--force")
  organizer.run(dry_run: dry_run)
end
