# tidy-file-organizer

[![Ruby](https://img.shields.io/badge/Ruby-3.0+-red.svg)](https://www.ruby-lang.org/)
[![License](https://img.shields.io/badge/License-MIT-blue.svg)](LICENSE)

[English](README.md)

ãƒ•ã‚¡ã‚¤ãƒ«åã€ãƒ•ã‚©ãƒ«ãƒ€åã€æ‹¡å¼µå­ãªã©ã«åŸºã¥ã„ã¦ãƒ•ã‚¡ã‚¤ãƒ«ã‚’è‡ªå‹•çš„ã«æ•´ç†ã™ã‚‹Rubyè£½ã®CLIãƒ„ãƒ¼ãƒ«ã§ã™ã€‚

## ç‰¹å¾´

- ğŸ—‚ï¸ **æ‹¡å¼µå­ãƒ™ãƒ¼ã‚¹ã®æ•´ç†**: ç”»åƒã€æ›¸é¡ã€ã‚¹ã‚¯ãƒªãƒ—ãƒˆãªã©ã€ãƒ•ã‚¡ã‚¤ãƒ«ã‚¿ã‚¤ãƒ—ã”ã¨ã«è‡ªå‹•åˆ†é¡
- ğŸ” **ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ãƒ™ãƒ¼ã‚¹ã®æ•´ç†**: ãƒ•ã‚¡ã‚¤ãƒ«åã«å«ã¾ã‚Œã‚‹ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ã§æŸ”è»Ÿã«åˆ†é¡ï¼ˆå„ªå…ˆåº¦ï¼šé«˜ï¼‰
- ğŸ“… **æ—¥ä»˜ãƒ™ãƒ¼ã‚¹ã®æ•´ç†**: ãƒ•ã‚¡ã‚¤ãƒ«ã®æ›´æ–°æ—¥æ™‚ã§æ•´ç†ï¼ˆå¹´ã€å¹´æœˆã€å¹´æœˆæ—¥ï¼‰
- ğŸ” **é‡è¤‡æ¤œå‡º**: SHA-256ãƒãƒƒã‚·ãƒ¥æ¯”è¼ƒã«ã‚ˆã‚‹é‡è¤‡ãƒ•ã‚¡ã‚¤ãƒ«ã®æ¤œå‡º
- ğŸ—‘ï¸ **é‡è¤‡å‰Šé™¤**: é‡è¤‡ãƒ•ã‚¡ã‚¤ãƒ«ã‚’è‡ªå‹•å‰Šé™¤ï¼ˆ1ã¤ã®ã‚³ãƒ”ãƒ¼ã‚’ä¿æŒï¼‰
- ğŸ”„ **å†å¸°ãƒ¢ãƒ¼ãƒ‰**: ã‚µãƒ–ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªå†…ã®ãƒ•ã‚¡ã‚¤ãƒ«ã‚‚å†å¸°çš„ã«æ•´ç†
- ğŸ§ª **Dry-runãƒ¢ãƒ¼ãƒ‰**: å®Ÿéš›ã«ç§»å‹•ã™ã‚‹å‰ã«ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³å®Ÿè¡Œï¼ˆãƒ‡ãƒ•ã‚©ãƒ«ãƒˆï¼‰
- âš ï¸ **å®‰å…¨ãªå®Ÿè¡Œ**: ãƒ•ã‚¡ã‚¤ãƒ«åé‡è¤‡ã®æ¤œçŸ¥ã€æ•´ç†æ¸ˆã¿ãƒ•ã‚©ãƒ«ãƒ€ã®é™¤å¤–
- ğŸ§¹ **è‡ªå‹•ã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒƒãƒ—**: ç©ºã«ãªã£ãŸãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã‚’è‡ªå‹•å‰Šé™¤
- ğŸŒ **æ—¥æœ¬èªå¯¾å¿œ**: æ—¥æœ¬èªãƒ•ã‚¡ã‚¤ãƒ«åãƒ»ãƒ•ã‚©ãƒ«ãƒ€åã«å®Œå…¨å¯¾å¿œ
- âš™ï¸ **æŸ”è»Ÿãªè¨­å®š**: ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã”ã¨ã«ç•°ãªã‚‹æ•´ç†ãƒ«ãƒ¼ãƒ«ã‚’ä¿å­˜

## ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«

### Gemã¨ã—ã¦ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«

```bash
gem build tidy-file-organizer.gemspec
gem install ./tidy-file-organizer-0.1.0.gem
```

### é–‹ç™ºç’°å¢ƒã§ä½¿ç”¨

```bash
bundle install
ruby -I lib ./exe/tidy-file-organizer [command] [options]
```

## ä½¿ã„æ–¹

### 1. ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—ï¼ˆæ•´ç†ãƒ«ãƒ¼ãƒ«ã®è¨­å®šï¼‰

```bash
tidy-file-organizer setup [ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªãƒ‘ã‚¹]
```

å¯¾è©±å½¢å¼ã§æ•´ç†ãƒ«ãƒ¼ãƒ«ã‚’è¨­å®šã—ã¾ã™ï¼š

```
[1] æ‹¡å¼µå­ã«ã‚ˆã‚‹æ•´ç†ãƒ«ãƒ¼ãƒ«
------------------------------------------------------------
ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆå€¤:
  jpg,jpeg,png,gif,bmp,svg,webp:ç”»åƒ
  pdf,doc,docx,xls,xlsx,ppt,pptx,txt,md:æ›¸é¡
  rb,py,js,ts,java,cpp,c,go,rs:ã‚¹ã‚¯ãƒªãƒ—ãƒˆ
  ...

[2] ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ã«ã‚ˆã‚‹æ•´ç†ãƒ«ãƒ¼ãƒ«
------------------------------------------------------------
ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆå€¤:
  screenshot,ã‚¹ã‚¯ãƒªãƒ¼ãƒ³ã‚·ãƒ§ãƒƒãƒˆ,ã‚¹ã‚¯ã‚·ãƒ§:ã‚¹ã‚¯ãƒªãƒ¼ãƒ³ã‚·ãƒ§ãƒƒãƒˆ
  invoice,è«‹æ±‚æ›¸,è¦‹ç©:è«‹æ±‚æ›¸
  ...
```

### 2. Dry-runï¼ˆã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ï¼‰

```bash
# ãƒ«ãƒ¼ãƒˆãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã®ã¿
tidy-file-organizer run [ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªãƒ‘ã‚¹]

# ã‚µãƒ–ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã‚‚å«ã‚ã¦
tidy-file-organizer run [ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªãƒ‘ã‚¹] --recursive
```

å®Ÿè¡Œä¾‹ï¼š
```
--- æ•´ç†ã‚’é–‹å§‹ã—ã¾ã™ (/path/to/dir) [Dry-run ãƒ¢ãƒ¼ãƒ‰] [å†å¸°ãƒ¢ãƒ¼ãƒ‰] ---
[Dry-run] photo1.jpg -> ç”»åƒ/
[Dry-run] report.pdf -> æ›¸é¡/
[Dry-run] screenshot_2024.png -> ã‚¹ã‚¯ãƒªãƒ¼ãƒ³ã‚·ãƒ§ãƒƒãƒˆ/
âš ï¸  Conflict: image.jpg -> ç”»åƒ/ (ãƒ•ã‚¡ã‚¤ãƒ«åãŒé‡è¤‡ã—ã¦ã„ã¾ã™)
```

### 3. å®Ÿéš›ã«æ•´ç†ã‚’å®Ÿè¡Œ

```bash
# å•é¡ŒãŒãªã‘ã‚Œã° --force ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã§å®Ÿè¡Œ
tidy-file-organizer run [ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªãƒ‘ã‚¹] --force

# å†å¸°ãƒ¢ãƒ¼ãƒ‰ã¨çµ„ã¿åˆã‚ã›
tidy-file-organizer run [ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªãƒ‘ã‚¹] --recursive --force
```

## ã‚³ãƒãƒ³ãƒ‰ä¸€è¦§

### åŸºæœ¬çš„ãªæ•´ç†
```
tidy-file-organizer setup [directory]              # æ•´ç†ãƒ«ãƒ¼ãƒ«ã‚’è¨­å®š
tidy-file-organizer run [directory]                # Dry-runï¼ˆã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ï¼‰
tidy-file-organizer run [directory] --force        # å®Ÿéš›ã«æ•´ç†ã‚’å®Ÿè¡Œ
tidy-file-organizer run [directory] --recursive    # ã‚µãƒ–ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã‚‚å¯¾è±¡
tidy-file-organizer run [directory] -r --force     # å†å¸°ãƒ¢ãƒ¼ãƒ‰ã§å®Ÿè¡Œ
```

### æ—¥ä»˜ãƒ™ãƒ¼ã‚¹ã®æ•´ç†
```
# å¹´ã”ã¨ã«æ•´ç†ï¼ˆä¾‹: 2023/, 2024/ï¼‰
tidy-file-organizer organize-by-date [directory] --pattern=year

# å¹´æœˆã”ã¨ã«æ•´ç†ï¼ˆä¾‹: 2023-01/, 2023-06/ï¼‰
tidy-file-organizer organize-by-date [directory] --pattern=year-month

# å¹´æœˆæ—¥ã”ã¨ã«æ•´ç†ï¼ˆä¾‹: 2023-01-15/ï¼‰
tidy-file-organizer organize-by-date [directory] --pattern=year-month-day --force
```

### é‡è¤‡ãƒ•ã‚¡ã‚¤ãƒ«ç®¡ç†
```
# é‡è¤‡ãƒ•ã‚¡ã‚¤ãƒ«ã‚’æ¤œå‡º
tidy-file-organizer find-duplicates [directory] --recursive

# é‡è¤‡ãƒ•ã‚¡ã‚¤ãƒ«ã‚’å‰Šé™¤ï¼ˆæœ€åˆã®ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä¿æŒã€æ®‹ã‚Šã‚’å‰Šé™¤ï¼‰
# ã‚¤ãƒ³ã‚¿ãƒ©ã‚¯ãƒ†ã‚£ãƒ–ãƒ¢ãƒ¼ãƒ‰: å‰Šé™¤å‰ã«ç¢ºèªã‚’æ±‚ã‚ã¾ã™
tidy-file-organizer remove-duplicates [directory] --recursive --force

# ç¢ºèªã‚’ã‚¹ã‚­ãƒƒãƒ—ã™ã‚‹å ´åˆã¯ --no-confirm ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã‚’ä½¿ç”¨
tidy-file-organizer remove-duplicates [directory] --recursive --force --no-confirm
```

**æ³¨æ„**: ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§ã¯ã€`remove-duplicates` ã‚³ãƒãƒ³ãƒ‰ã¯ãƒ•ã‚¡ã‚¤ãƒ«å‰Šé™¤å‰ã« [yes/no] ã§ç¢ºèªã‚’æ±‚ã‚ã¾ã™ã€‚ç¢ºèªã‚’ã‚¹ã‚­ãƒƒãƒ—ã™ã‚‹å ´åˆã¯ `--no-confirm` ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã‚’ä½¿ç”¨ã—ã¦ãã ã•ã„ã€‚

## è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«

è¨­å®šã¯ä»¥ä¸‹ã®ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã«ä¿å­˜ã•ã‚Œã¾ã™ï¼š

```
~/.config/tidy-file-organizer/[MD5ãƒãƒƒã‚·ãƒ¥].yml
```

å„ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã”ã¨ã«ç‹¬ç«‹ã—ãŸè¨­å®šãŒä¿æŒã•ã‚Œã¾ã™ã€‚

## å‹•ä½œä¾‹

### Beforeï¼ˆæ•´ç†å‰ï¼‰
```
Downloads/
â”œâ”€â”€ photo1.jpg
â”œâ”€â”€ photo2.png
â”œâ”€â”€ report.pdf
â”œâ”€â”€ invoice_2024.pdf
â”œâ”€â”€ script.rb
â”œâ”€â”€ memo.txt
â””â”€â”€ screenshot_2024.png
```

### Afterï¼ˆæ•´ç†å¾Œï¼‰
```
Downloads/
â”œâ”€â”€ ç”»åƒ/
â”‚   â”œâ”€â”€ photo1.jpg
â”‚   â””â”€â”€ photo2.png
â”œâ”€â”€ æ›¸é¡/
â”‚   â”œâ”€â”€ report.pdf
â”‚   â””â”€â”€ memo.txt
â”œâ”€â”€ ã‚¹ã‚¯ãƒªãƒ¼ãƒ³ã‚·ãƒ§ãƒƒãƒˆ/
â”‚   â””â”€â”€ screenshot_2024.png
â”œâ”€â”€ è«‹æ±‚æ›¸/
â”‚   â””â”€â”€ invoice_2024.pdf
â””â”€â”€ ã‚¹ã‚¯ãƒªãƒ—ãƒˆ/
    â””â”€â”€ script.rb
```

## é–‹ç™º

### ãƒ†ã‚¹ãƒˆã®å®Ÿè¡Œ

```bash
bundle exec rspec
```

### ãƒ†ã‚¹ãƒˆãƒ‡ãƒ¼ã‚¿ã§è©¦ã™

```bash
# è‹±èªãƒ•ã‚¡ã‚¤ãƒ«å
ruby -I lib ./exe/tidy-file-organizer setup spec/data/en
ruby -I lib ./exe/tidy-file-organizer run spec/data/en --recursive

# æ—¥æœ¬èªãƒ•ã‚¡ã‚¤ãƒ«å
ruby -I lib ./exe/tidy-file-organizer setup spec/data/ja
ruby -I lib ./exe/tidy-file-organizer run spec/data/ja --recursive
```

## æŠ€è¡“ä»•æ§˜

- **è¨€èª**: Ruby 3.0+
- **æ¨™æº–ãƒ©ã‚¤ãƒ–ãƒ©ãƒª**: yaml, fileutils, digest
- **ãƒ†ã‚¹ãƒˆãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯**: RSpec 3.0+
- **è¨­å®šå½¢å¼**: YAML

## ãƒ©ã‚¤ã‚»ãƒ³ã‚¹

MIT License

## è¬è¾

æœ¬ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®RuboCopè¨­å®šã«ã¯ã€[Style guides in COOKPAD](https://github.com/cookpad/styleguide)ã‚’ä½¿ç”¨ã—ã¦ã„ã¾ã™ã€‚ã“ã®ã‚¹ã‚¿ã‚¤ãƒ«ã‚¬ã‚¤ãƒ‰ã¯[CC BY 3.0](https://creativecommons.org/licenses/by/3.0/)ãƒ©ã‚¤ã‚»ãƒ³ã‚¹ã®ä¸‹ã§æä¾›ã•ã‚Œã¦ã„ã¾ã™ã€‚

## ä½œè€…

sachin21
